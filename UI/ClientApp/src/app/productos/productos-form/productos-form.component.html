<h1 *ngIf="modoEdicion">Editar Producto</h1>
<h1 *ngIf="!modoEdicion">Agregar Producto</h1>
<form class="form-horizontal" novalidate (ngSubmit)="save()" [formGroup]="formGroup">
  <fieldset>
    <div class="row">
      <div class="form-group col-md-4"
        [ngClass]="{'has-error': ((referencia.touched || referencia.dirty) && referencia.invalid)}">
        <label class="col-md-12 control-label" for="referenciaId">Referencia</label>

        <div class="col-md-8">
          <input class="form-control" id="referenciaId" type="text" formControlName="referencia" *ngIf="!modoEdicion" />
          <input class="form-control" id="referenciaId" type="text" formControlName="referencia" *ngIf="modoEdicion"
            disabled />
          <div class="alert alert-danger" *ngIf="((referencia.touched || referencia.dirty )&& referencia.invalid)">
            <span *ngIf="referencia.errors.required">
              El campo Referencia es requerido
            </span>
          </div>
        </div>
      </div>

      <div class="form-group col-md-4"
        [ngClass]="{'has-error': ((descripcion.touched || descripcion.dirty) && descripcion.invalid)}">
        <label class="col-md-12 control-label" for="descripcionId">Descripción del Producto</label>

        <div class="col-md-8">
          <input class="form-control" id="descripcionId" type="text" formControlName="descripcion" />
          <div class="alert alert-danger" *ngIf="((descripcion.touched || descripcion.dirty )&& descripcion.invalid)">
            <span *ngIf="descripcion.errors.required">
              El campo Descripcion es requerido
            </span>
          </div>
        </div>
      </div>

      <div class="form-group col-md-4"
        [ngClass]="{'has-error': ((formatoVenta.touched || formatoVenta.dirty) && formatoVenta.invalid)}">
        <label class="col-md-12 control-label" for="formatoVenta">Formato Venta del Producto</label>
        <div class="col-md-8">
          <mat-select formControlName="formatoVenta" placeholder="Elija una opción" #formatoVentaIdSelect>
            <mat-option *ngFor="let tipo of formatosVenta" [value]="tipo.nombre">
              {{tipo.nombre}}
            </mat-option>
          </mat-select>
          <div class="alert alert-danger"
            *ngIf="((formatoVenta.touched || formatoVenta.dirty )&& formatoVenta.invalid)">
            <span *ngIf="formatoVenta.errors.required">
              El campo Formato Venta es requerido
            </span>
          </div>
        </div>
      </div>

    </div>
    <div class="row">
      <div class="form-group col-md-4"
           [ngClass]="{'has-error': ((idMarca.touched || idMarca.dirty) && idMarca.invalid)}">
        <label class="col-md-12 control-label" for="idMarca">Marca del producto</label>
        <div class="col-md-8">
          <mat-select formControlName="idMarca" placeholder="Elija una opción" #idMarcaIdSelect>
            <mat-option *ngFor="let tipo of marcas" [value]="tipo.id">
              {{tipo.nombre}}
            </mat-option>
          </mat-select>
          <div class="alert alert-danger"
               *ngIf="((idMarca.touched || idMarca.dirty )&& idMarca.invalid)">
            <span *ngIf="idMarca.errors.required">
              El campo marca es requerido
            </span>
          </div>
        </div>
      </div>

      <div class="form-group col-md-4"
           [ngClass]="{'has-error': ((idCategoria.touched || idCategoria.dirty) && idCategoria.invalid)}">
        <label class="col-md-12 control-label" for="idCategoria">Categoria del producto</label>
        <div class="col-md-8">
          <mat-select formControlName="idCategoria" placeholder="Elija una opción" #idCategoriaIdSelect>
            <mat-option *ngFor="let tipo of categorias" [value]="tipo.id">
              {{tipo.nombre}}
            </mat-option>
          </mat-select>
          <div class="alert alert-danger"
               *ngIf="((idCategoria.touched || idCategoria.dirty )&& idCategoria.invalid)">
            <span *ngIf="idCategoria.errors.required">
              El campo categoria es requerido
            </span>
          </div>
        </div>
      </div>

      <div class="form-group col-md-4"
           [ngClass]="{'has-error': ((idProveedor.touched || idProveedor.dirty) && idProveedor.invalid)}">
        <label class="col-md-12 control-label" for="idProveedor">Proveedor del producto</label>
        <div class="col-md-8">
          <mat-select formControlName="idProveedor" placeholder="Elija una opción" #idProveedorIdSelect>
            <mat-option *ngFor="let tipo of proveedores" [value]="tipo.identificacion">
              {{tipo.nombre}} {{tipo.apellido}}
            </mat-option>
          </mat-select>
          <div class="alert alert-danger"
               *ngIf="((idProveedor.touched || idProveedor.dirty )&& idProveedor.invalid)">
            <span *ngIf="idProveedor.errors.required">
              El campo categoria es requerido
            </span>
          </div>
        </div>
      </div>

      <div class="form-group col-md-4" [ngClass]="{'has-error': ((fabrica.touched || fabrica.dirty) && fabrica.invalid)}">
        <label class="col-md-12 control-label" for="fabricaId">Fabrica del Producto</label>

        <div class="col-md-8">
          <input class="form-control" id="fabricaId" type="text" formControlName="fabrica" />
          <div class="alert alert-danger" *ngIf="((fabrica.touched || fabrica.dirty )&& fabrica.invalid)">
            <span *ngIf="fabrica.errors.required">
              El campo Fabrica es requerido
            </span>
          </div>
        </div>
      </div>

      <div class="form-group col-md-4" [ngClass]="{'has-error': ((costo.touched || costo.dirty) && costo.invalid)}">
        <label class="col-md-12 control-label" for="costoId">Costo del Producto</label>

        <div class="col-md-8">
          <input class="form-control" id="costoId" type="text" formControlName="costo" />
          <div class="alert alert-danger" *ngIf="((costo.touched || costo.dirty )&& costo.invalid)">
            <span *ngIf="costo.errors.required">
              El campo Costo es requerido
            </span>
            <span *ngIf="costo.errors.pattern">
              El campo Costo es numerico
            </span>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="form-group col-md-4"
           [ngClass]="{'has-error': ((precioVenta.touched || precioVenta.dirty) && precioVenta.invalid)}">
        <label class="col-md-12 control-label" for="precioVentaId">Precio de Venta del Producto</label>

        <div class="col-md-8">
          <input class="form-control" id="precioVentaId" type="text" formControlName="precioVenta" />
          <div class="alert alert-danger" *ngIf="((precioVenta.touched || precioVenta.dirty )&& precioVenta.invalid)">
            <span *ngIf="precioVenta.errors.required">
              El campo Precio de Venta es requerido
            </span>
            <span *ngIf="precioVenta.errors.pattern">
              El campo Precio de Venta es numerico
            </span>
          </div>
        </div>
      </div>
      <!--
    <div class="form-group col-md-4" [ngClass]="{'has-error': ((iVA.touched || iVA.dirty) && iVA.invalid)}">
      <label class="col-md-12 control-label" for="iva">IVA del Producto <i>Dejar en 0 si no lleva iva</i></label>
      <div class="col-md-8">
        <input class="form-control" id="iva" type="number" formControlName="iVA" />
        <div class="alert alert-danger" *ngIf="((iVA.touched || iVA.dirty )&& iVA.invalid)">
          <span *ngIf="iVA.errors.required">
            El IVA es requerido
          </span>
          <span *ngIf="iVA.errors.pattern">
            El campo IVA es numerico
          </span>
        </div>
      </div>
    </div>-->

      <div class="form-group col-md-4"
           [ngClass]="{'has-error': ((idImpuestos.touched || idImpuestos.dirty) && idImpuestos.invalid)}">
        <label class="col-md-12 control-label" for="idImpuestosId">Impuestos/Devengados Producto</label>
        <div class="col-md-8">
          <mat-select formControlName="idImpuestos" id="idImpuestosId" placeholder="Elija una opción" multiple #idImpuestosIdSelect>
            <mat-option *ngFor="let item of impuestos" [value]="item.id">
              {{item.nombre}}
            </mat-option>
          </mat-select>
          <div class="alert alert-danger"
               *ngIf="((idImpuestos.touched || idImpuestos.dirty )&& idImpuestos.invalid)">
            <span *ngIf="idImpuestos.errors.required">
              El campo Impuestos/Devengados Producto es requerido
            </span>
          </div>
        </div>
      </div>

      <div class="form-group col-md-4"
           [ngClass]="{'has-error': ((cantidadMinima.touched || cantidadMinima.dirty) && cantidadMinima.invalid)}">
        <label class="col-md-12 control-label" for="cantidadMinimaId">Cantidad Mínima del Producto</label>

        <div class="col-md-8">
          <input class="form-control" id="cantidadMinimaId" type="text" formControlName="cantidadMinima" />
          <div class="alert alert-danger"
               *ngIf="((cantidadMinima.touched || cantidadMinima.dirty )&& cantidadMinima.invalid)">
            <span *ngIf="cantidadMinima.errors.required">
              El campo Cantidad mínima es requerido
            </span>
            <span *ngIf="cantidadMinima.errors.pattern">
              El campo Cantidad mínima es numerico
            </span>
          </div>
        </div>
      </div>
    </div>
    <mat-divider></mat-divider>

    <mat-card class="example-card">
      <mat-card-header>        
        <mat-card-title>Contabilidad</mat-card-title>
        <mat-card-subtitle>Seleccione Cuentas</mat-card-subtitle>
      </mat-card-header>      
      <mat-card-content>
        <div class="row">
          <div class="col-md-4">
            <!--Cuenta de Ingreso-->
            <label for="cuentaIngresoId">Cuenta de ingreso</label>
            <app-select-cuenta (messageEvent)="receiveMessageCuentaIngreso($event)"></app-select-cuenta>
            <input type="hidden" formControlName="cuentaIngreso" id="cuentaIngresoId"/>
            <div class="col-md-4">
          </div>
            <!--Cuenta de Devolucion-->
            <label for="cuentaDevolucionId">Cuenta de devolución</label>
            <app-select-cuenta (messageEvent)="receiveMessageCuentaDevolucion($event)"></app-select-cuenta>
            <input type="hidden" formControlName="cuentaDevolucion" id="cuentaDevolucionId"/>
          </div>
          <div class="col-md-4">
            <!--Cuenta de Produccion-->
          </div>
        </div>
        <div class="row">
          <div class="col-md-4">
            <!--Cuenta de Gastos-->
          </div>
          <div class="col-md-4">
            <!--Cuenta de Inventario-->
          </div>
        </div>
        
      </mat-card-content>     
    </mat-card>

    <div class="form-group col-md-12">
      <div class="col-md-4 col-md-offset-2">
        <span>
          <button class="btn btn-success" type="submit" [disabled]="!formGroup.valid">
            Salvar
          </button>
          <button class="btn" type="button" [routerLink]='["/productos"]'>
            Cancelar
          </button>
        </span>

      </div>

    </div>
  </fieldset>
</form>
